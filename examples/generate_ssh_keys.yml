---
- hosts: all
  become: no
  remote_user: centos
  tasks:

    - name: "Create key pair"
      openssh_keypair:
        path: '{{ ansible_user_dir }}/.ssh/id_rsa'
      delegate_to: localhost

    - debug: msg="the value of foo.txt is {{lookup('file', '{{ ansible_user_dir }}' + '/.ssh/id_rsa.pub') }}"
    - debug: msg='{{ ansible_user_dir }}'

    - name: Copying the public keys
      lineinfile:
        path: "{{ ansible_user_dir }}/.ssh/authorized_keys"
        line: "{{lookup('file', '{{ ansible_user_dir }}' + '/.ssh/id_rsa.pub') }}"
        state: present
        backup: yes
      register: example2out